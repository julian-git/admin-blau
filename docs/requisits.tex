\documentclass[11pt]{amsart}

\usepackage{a4wide}
\usepackage[usenames,dvipsnames]{color}
\usepackage[latin1]{inputenc}
\usepackage[catalan]{babel}
\usepackage{paralist}
\usepackage{graphicx}
\usepackage{times}

\newcommand{\obert}{\textcolor{red}{\bfseries Obert\ }}
\newcommand{\falta}{\textcolor{red}{\bfseries Falta\ }}
\newcommand{\progres}{\textcolor{BurntOrange}{\bfseries En progrès\ }}
\newcommand{\complert}{\textcolor{ForestGreen}{\bfseries Complert\ }}


\begin{document}

\title{l'Admin Blau: Requisits}
\maketitle


\section{Descripció de les entitats principals de l'aplicació}

\begin{description}
\item[Castellers] \complert
\item[Categories de castellers] \complert
\item[Rols] \complert; sense funcionalitat
\item[Famílies] \progres definit, crud funciona; \falta taula intermitjana per persones
\item[Quotes]\progres crud parcial; \falta poder editar bé els responsables i coberts 
\item[Esdeveniments] \progres \falta preus
\item[Compte] \falta
\item[Rebuts] \falta
\end{description}


\section{Requisits funcionals}

\subsection{Versió 0.5}
\begin{description}
\setlength{\itemsep}{3ex}
\item[R01] Alta, baixa i modificació de persones \progres 

\begin{itemize}
\item Un administrador ha de poder accedir a una part privada per afegir, editar i eliminar persones a la base de dades. \complert
\item Quan es doni d'alta una persona, enviar-li un mail informant-lo de l'alta i se li adjunten les dades per a que les comprovi. \falta
\item Quan es doni de baixa algú, enviar també mail informant. \falta
\end{itemize}

\item[R02] Agrupar persones per famílies \progres

 Les famílies estaran composades per diversos castellers ja existents a la base de persones.
Cada persona només pot pertànyer a una família.

\begin{itemize}
\item L'administrador ha de poder afegir, editar i eliminar famílies. \progres llevat el rol
\item Quan es doni d'alta una família, avisar a tots els responsables de que se'ls ha agrupat en una família. \falta
\item El mateix quan es doni de baixa. \falta
\end{itemize}


\item[R03] Alta, baixa i modificació de quotes \progres

\begin{itemize}
\item L'administrador ha de poder afegir, editar i eliminar quotes. \complert
\item Una quota té un responsable (a la taula de persones), que és el titular del compte corrent al que es passa el rebut. \complert
\item Cada quota tindrà associat un llistat de un o més castellers als quals ``cobreix''. \complert
\item Cada vegada que es dóna d'alta/baixa una quota, enviar un mail al responsable informant-lo. \falta
\end{itemize}

\item[R04] Generació de rebuts \falta

  \begin{itemize}
  \item L'administrador ha de poder generar rebuts per a les quotes de manera periòdica.
\item Cada vegada que es generi un rebut, se seleccionaràn les quotes sobre les que es genera el rebut, es crearà un fitxer de text pla seguint el format N19 (o el IBAN directament, que és al que anem CAL MIRAR EL FORMAT!) per a descarregar (i després pujar-lo al banc) i es guardarà un històric de cada rebut passat a cada responsable de quota. 
\item Guardar el fitxer de text generat.

\item Enviar un mail als responsables de la quota de que es passa la quota. Hi ha gent que es queixa de que no s'avisa quan es passen les quotes, d'aquesta manera se'ls avisaria de manera automàtica.

  \end{itemize}

\end{description}

\subsection{Versió 1.0}

\begin{description}
\setlength{\itemsep}{3ex}
\item[R05] Consulta i modificació de l'històric de rebuts \falta

L'administrador ha de poder consultar els rebuts passats i el seu estat. També ha de poder canviar l'estat, per marcar els rebuts retornats.

Quan un rebut es marqui com a retornat, enviar un mail al responsable de la quota per a informar-lo.

\item[R06] Crear, editar i esborrar esdeveniments \complert

L'administrador ha de poder crear, modificar i esborrar esdeveniments.

\item[R07] Modificació de les dades "personals" per part d'una persona \complert apart de rols

\item[R08] Modificació de les dades "personals" d'una família per part d'un responsable 
\complert apart de rols

\item[R09] Cada mes s'ha de poder treure una llista de quotes per passar al banc \falta

\item[R10] Una persona ha de poder pagar la quota per a una altra persona o persones \complert 

\item[R11] Hi ha persones que no volen rebre els SMS de la colla \complert

Tot i tenir un mòbil registrat, hi ha gent que no vol rebre els SMS de la colla

\item[R12] Volem un llistat d'apuntats a una activitat \complert

\item[R13] Volem un llistat d'assistents a una activitat?? \falta

\item[R14] Les quotes poden tenir una periodicitat diferent i un import diferent per cada casteller. \complert

\begin{itemize}
\item Les periodicitats es definiran en mesos, i estaran predefinides en el sistema (trimestral, semestral, anual).  \complert

\item S'han de poder afegir noves periodicitats en un futur (encara que sigui directament a la BD) \complert

\item Les periodicitats poden tenir un mes de cobrament (ex: anual, però cobrar al juliol). \complert
\end{itemize}

\end{description}

\section{Discussió de taules individuals}

\subsection{Famílies}

Les unitats familiars seran agrupacions de castellers.


Cal tenir en compte que hi ha famílies que són només de canalla. 
Per tant, cal contemplar la manera de poder afegir informació d'algun contacte dels pares (que no tenen perquè ser castellers). 
També cal tenir en compte que hi ha famílies on els pares estàn separats i tots 2 volen rebre tota la informació de les activitats dels fills.

\subsubsection*{Camps}
\begin{itemize}
\item id
\item nom (els cognoms?)
\item activa
\item\ [id dels castellers de la família] (FK)
\item\ [ids dels castellers responsables] (FK)   afegir boolea de responsable/no responsable a la taula auxiliar
\end{itemize}

\newpage
\includegraphics[width=\linewidth]{DbSchemaAdminBlau}

\end{document}
